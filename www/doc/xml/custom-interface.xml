<sect1 id="custom-interface" xreflabel="Customizing Item Information Pages and Data Entry Forms">
  <title>Customizing Item Information Pages and Data Entry Forms</title>

  <para>Once you have the defined a content type for your system, you
    can use the generic interface defined by the content management
    system for creating, editing and browsing items of that type. If
    the generic interface does not meet your requirements, you can
    customize part or all it to suit your needs.</para>

  <para>The generic interface for content items includes three general
    types of templates, all located under
    <computeroutput>/cms/modules/items</computeroutput>:</para>

  <itemizedlist>
    <listitem><para><phrase>Forms</phrase> for all item-related transactions.</para></listitem>

    <listitem><para><phrase>Information pages</phrase> for displaying information about the
	items. The page templates themselves may display little or no
	information directly, instead relying on included components.</para></listitem>

    <listitem><para><phrase>Information components</phrase> for providing access to specific
	types information (and associated actions) in the information page.
	Components are designed for inclusion in a page (either the generic
	information page or a custom one), not for standalone display.</para></listitem>
  </itemizedlist>

  <sect2 id="custom-interface-forms" xreflabel="Forms">
    <title>Forms</title>

    <para>The following generic data entry forms are generated by the
      system for any content type:</para>

    <informaltable><tgroup cols="2">
	<thead>
	  <row>
	    <entry align="center">Page</entry>
	    <entry align="center">Description</entry>
	  </row>
	</thead>

	<tbody>
	  <row>
	    <entry><computeroutput>create-1</computeroutput></entry>
	    <entry>Form to enter attributes for a new content item. The widgets
	      displayed on the generic form are determined by the form metadata
	      the developer has associated with attributes of the content type.
	      Includes a radio selection allowing the user to pick a method for
	      adding the body of the content item. 

	      <variablelist>
		<varlistentry>
		  <term>Signature:</term>
		  <listitem><para>
		      <computeroutput>parent_id</computeroutput>: item ID of container item
		    </para>
		    <para>
		      <computeroutput>content_type</computeroutput>: content type of new item
		    </para>
		  </listitem>
		</varlistentry>
	      </variablelist>

	    </entry>
	  </row>

	  <row>
	    <entry>
	      <computeroutput>content-add-1</computeroutput></entry>
	    <entry>Form to upload or enter the body of a content item. Displays
	      either a file upload widget or text area depending on user
	      selection 

	      <variablelist>
		<varlistentry>
		  <term>Signature:</term>
		  <listitem><para>
		      <computeroutput>parent_id</computeroutput>: item ID of container item
		    </para>
		    <para>
		      <computeroutput>content_type</computeroutput>: content type of new item
		    </para>
		    <para>all other attributes from previous step (varies by content type)</para>
		  </listitem>
		</varlistentry>
	      </variablelist>

	    </entry>
	  </row>

	  <row>
	    <entry>
	      <computeroutput>revision-add-1</computeroutput></entry>
	    <entry>Form to edit attributes of an existing content item. The
	      widgets displayed on the generic form are determined by the form
	      metadata the developer has associated with attributes of the
	      content type. Includes a radio selection allowing the user to pick
	      a method for editing the body of the content item. 

	      <variablelist>
		<varlistentry>
		  <term>Signature:</term>
		  <listitem><para>
		      <computeroutput>item_id</computeroutput>: ID of the item
		    </para>
		  </listitem>
		</varlistentry>
	      </variablelist>

	    </entry>
	  </row>

	  <row>
	    <entry>
	      <computeroutput>attributes-edit</computeroutput></entry>
	    <entry>Form to edit the attributes of an existing content item. Copies
	      the content from the latest revision to the new revision. 

	      <variablelist>
		<varlistentry>
		  <term>Signature:</term>
		  <listitem><para>
		      <computeroutput>item_id</computeroutput>: ID of the item
		    </para>
		  </listitem>
		</varlistentry>
	      </variablelist>

	    </entry>
	  </row>
	</tbody></tgroup></informaltable>

    <para>If a custom form is required, you may define it in
      <computeroutput>/cms/modules/items/custom/&lt;content_type&gt;/</computeroutput>
      with the same name as specified above. If a custom implementation of the
      form exists, the system will redirect to it. Once the user has been
      redirected to your custom form, you may choose to implement any
      page flow desired before ultimately redirecting to the item
      information page.</para>

    <para>See also the documentation on <link linkend="data-entry-methods">auto-generated</link> forms.</para>
  </sect2>

  <sect2 id="custom-interface-information-components" xreflabel="Information Components">
    <title>Information Components</title>

    <informaltable><tgroup cols="2">
	<thead>
	  <row>
	    <entry align="center">Component</entry>
	    <entry align="center">Description</entry>
	  </row>
	</thead>

	<tbody>
	  <row>
	    <entry>
	      <computeroutput>children</computeroutput></entry>
	    <entry>List of links to child items of the current item. Includes a
	      select widget to add a new child item of an appropriate type.</entry>
	  </row>

	  <row>
	    <entry>
	      <computeroutput>templates</computeroutput></entry>
	    <entry>Lists templates currently associated with this item by user
	      context. Includes a link to <computeroutput>register-template</computeroutput> to change
	      template assignments.</entry>
	  </row>

	  <row>
	    <entry>
	      <computeroutput>permissions</computeroutput></entry>
	    <entry>Lists permissions currently associated with this item. Includes
	      a link to <computeroutput>permission-add</computeroutput> to add a new permission
	      record.</entry>
	  </row>

	  <row>
	    <entry>
	      <computeroutput>related-links</computeroutput></entry>
	    <entry>Lists offsite links related to this item. Includes a link to
	      add marked offsite links (from anywhere in the Bookmarks tree) to
	      the list.</entry>
	  </row>

	  <row>
	    <entry>
	      <computeroutput>related-items</computeroutput></entry>
	    <entry>Lists other items related to this item. Includes a link to add
	      marked links (from anywhere in the Site Map tree) to the list.</entry>
	  </row>

	  <row>
	    <entry>
	      <computeroutput>workflow</computeroutput></entry>
	    <entry>
	      <itemizedlist>
		<listitem><para>Gives current workflow status (active, suspended,
		    finished)</para></listitem>

		<listitem><para>If a task is currently enabled, gives the name of the task and
		    the deadline. If the current user is assigned to the task, gives a
		    link to start the task.</para></listitem>

		<listitem><para>If a task is currently underway (started), gives the name of
		    the task, the name of the person undertaking the task, and the
		    deadline if any. If the current user has started the task, gives a
		    link to finish the task.</para></listitem>
	      </itemizedlist>
	    </entry>
	  </row>

	  <row>
	    <entry>
	      <computeroutput>keywords</computeroutput></entry>
	    <entry>Lists subject headings assigned to the content item. Includes a
	      link to add marked subject headings (from anywhere in the Subject
	      Headings tree) to the list.</entry>
	  </row>

	  <row>
	    <entry>
	      <computeroutput>revisions</computeroutput></entry>
	    <entry>Lists the <emphasis>n</emphasis> most recent revisions to the item.
	      Includes controls to change the sort order and number of revisions
	      to be displayed, as well as links to view a revision in
	      context.</entry>
	  </row>

	  <row>
	    <entry>
	      <computeroutput>journal</computeroutput></entry>
	    <entry>Lists all comments made on the item to date.</entry>
	  </row>

	  <row>
	    <entry>
	      <computeroutput>wizards</computeroutput></entry>
	    <entry>List of special tasks associated with a content item (defined
	      by a custom component under
	      <computeroutput>custom/&lt;content_type&gt;/wizards</computeroutput>).</entry>
	  </row>
	</tbody></tgroup></informaltable>

    <para>Any of these components may be incorporated into a custom
      information page using the <computeroutput>include</computeroutput> tag in the page
      template:</para>

    <programlisting>
&lt;include src="../../workflow" item_id=@item_id@&gt;
    </programlisting>
    
    <para>Note that <computeroutput>item_id</computeroutput> is the only parameter required by the
      standard information components.</para>

    <para>
      <ulink url="mailto:karlg@arsdigita.com">karlg@arsdigita.com</ulink> 
    </para>
    <para>
      Last revised: $Id$
    </para>
  </sect2>
</sect1>


<!--
 Local Variables:
 sgml-parent-document: ("index.xml" "chapter" "sect1")
 End:
-->
